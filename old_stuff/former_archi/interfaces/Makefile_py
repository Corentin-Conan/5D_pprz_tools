PROTOS_DIR := ./grpc
PROTO_FILES := $(shell find $(PROTOS_DIR) -name '*.proto')
SOURCE_DIR := ./src

all: python

python:
	@rm -rf $(SOURCE_DIR)/py
	@mkdir -p $(SOURCE_DIR)/py
	@for x in $(PROTO_FILES); do \
		python3 -m grpc_tools.protoc -I$(PROTOS_DIR) --python_out=$(SOURCE_DIR)/py --grpc_python_out=$(SOURCE_DIR)/py $$x; \
		done
